zypper -n install openldap2 openldap2-client
vi /etc/sysconfig/openldap
#change
OPENLDAP_START_LDAPI="yes"
#change
OPENLDAP_CONFIG_BACKEND="ldap"


dlp:~ # mv /etc/openldap/slapd.conf /etc/openldap/slapd.conf.org 
dlp:~ # touch /etc/openldap/slapd.conf 
dlp:~ # rm -rf /etc/openldap/slapd.d/* 
dlp:~ # slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d 
config file testing succeeded
dlp:~ # vi /etc/openldap/slapd.d/cn=config/olcDatabase\={0}config.ldif
# line 2: remove this line
# CRC32 xxxxxxxx
# line 6: change
olcAccess: {0}to * by dn.exact=gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth manage by * break
dlp:~ # chown -R ldap. /etc/openldap/slapd.d 
dlp:~ # chmod -R 700 /etc/openldap/slapd.d 
dlp:~ # /etc/init.d/ldap start 
dlp:~ # chkconfig ldap on
# generate encrypted password
dlp:~ # slappasswd 
New password:
Re-enter new password:
{SSHA}xxxxxxxxxxxxxxxxxxxxxxxx
dlp:~ # vi chrootpw.ldif
# specify the password generated above for "olcRootPW" section
 dn: olcDatabase={0}config,cn=config
changetype: modify
add: olcRootPW
olcRootPW: {SSHA}xxxxxxxxxxxxxxxxxxxxxxxx

dlp:~ # ldapadd -Y EXTERNAL -H ldapi:/// -f chrootpw.ldif 
SASL/EXTERNAL authentication started
SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth
SASL SSF: 0
modifying entry "olcDatabase={0}config,cn=config"
